#+title:piping with shell commands (sonic pi fx list)
#+author: Chen Zhu
#+layout: post
#+date: 2020-09-02 Wed
#+liquid: enabled
#+categories:
#+tags:  
#+roam_alias:
#+roam_tags: blog Unix-piping sonic-pi


* Unix/Philosophy: stackable
-
* Task: I want to make a YAS-snippet with all Sonic-Pi effects (fx)  by using ~YAS-choose-value~

*  How to quickly get these keys from github?

** STEP 1: grep "key:" -i sonic-pi-fx.md  # view lines with "key:" (ignoring cases)
  e.g. 
** STEP 2: grep "key:" -i -A1 sonic-pi-fx.md # get one extra lines below line with "Key:" 

#+BEGIN_QUOTE
### Key:
  :octaver
--
### Key:
  :vowel
--
### Key:
  :flanger
```
#+END_QUOTE


** STEP 3: $ grep "key:" -i -A1 sonic-pi-fx.md | grep "Key:" -v # get rid of lines with ":Keys:" and "--"

** STEP 4: grep "key:" -i -A1 sonic-pi-fx.md | grep "Key:" -v | grep "\-\-" -v
   # one more pipe to filter out "--"; much better result 
```
:pitch_shift
  :ring_mod
  :octaver
  :vowel
  :flanger

** STEP 5: replace ~:~ with ~"~ by using sed
$ grep "key:" -i -A1 sonic-pi-fx.md | grep "Key:" -v | grep "\-\-" -v | sed 's/\:/\"/'

```
  "pitch_shift
  "ring_mod
  "octaver
  "vowel
  "flanger

** STEP 6  add ~"~ to the end of each line
https://www.shellhacks.com/sed-awk-add-end-beginning-line/
~sed 's/$/SUFFIX/' FILE~  (you can use either ~sed~ or ~awk~


~$ grep "key:" -i -A1 sonic-pi-fx.md | grep "Key:" -v | grep "\-\-" -v | sed 's/\:/\"/' | sed 's/$/\"/'~

```
```
** STEP 7 save the final list 
$ grep "key:" -i -A1 sonic-pi-fx.md | grep "Key:" -v | grep "\-\-" -v | sed 's/\:/\"/' | sed 's/$/\"/' > sonic-pi-fx-key-list.txt


* 
